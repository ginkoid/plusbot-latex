mode: LISTEN
port: 5000
time_limit: 5

rlimit_as_type: HARD
rlimit_cpu_type: HARD
rlimit_fsize_type: HARD
rlimit_nofile_type: HARD
cgroup_mem_max: 20971520
cgroup_mem_mount: "/app/cgroup/memory"
cgroup_cpu_ms_per_sec: 500
cgroup_cpu_mount: "/app/cgroup/cpu,cpuacct"
max_cpus: 1

seccomp_string: "KILL {"
seccomp_string: "  clone { (clone_flags & 0x7e020000) != 0 },"
seccomp_string: "  mount, sethostname, umount, pivot_root"
seccomp_string: "}"
seccomp_string: "DEFAULT ALLOW"

mount {
  src: "/app/texlive"
  dst: "/texlive"
  is_bind: true
}
mount {
  src: "/app/preamble.fmt"
  dst: "/preamble.fmt"
  is_bind: true
}
mount {
  src: "/app/gs"
  dst: "/gs"
  is_bind: true
}
mount {
  dst: "/tmp"
  fstype: "tmpfs"
  rw: true
  options: "size=20m"
  nodev: true
  noexec: true
}
mount {
  src: "/lib/x86_64-linux-gnu"
  dst: "/lib/x86_64-linux-gnu"
  is_bind: true
}
mount {
  src: "/lib64"
  dst: "/lib64"
  is_bind: true
}
mount {
  src: "/dev/null"
  dst: "/dev/null"
  is_bind: true
}

exec_bin {
  path: "/app/job"
  exec_fd: true
}
